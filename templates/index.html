{% extends "base.html" %}

{% block content %}


<!-- Navigation -->
    <a id="menu-toggle" href="#" class="btn btn-dark btn-lg toggle"><i class="fa fa-bars"></i></a>
    <nav id="sidebar-wrapper">
        <ul class="sidebar-nav">
            <a id="menu-close" href="#" class="btn btn-light btn-lg pull-right toggle"><i class="fa fa-times"></i></a>
            <li class="sidebar-brand">
                <a href="#top"  onclick = $("#menu-close").click(); >Map My Story</a>
            </li>
            <li>
                <a href="#map" onclick = $("#menu-close").click(); >Explore the Map</a>
            </li>
            <li>
                <a href="#instructions" onclick = $("#menu-close").click(); >How does this work?</a>
            </li>
            <li>
                <a href="#about" onclick = $("#menu-close").click(); >About</a>
            </li>
            <li class = "hidden">
                <a href="#contact" onclick = $("#menu-close").click(); >Contact</a>
            </li>
        </ul>
    </nav>
        <script>
        var title = "Where do you live?";
        document.getElementsByClassName("modal-title").innerHTML = "Where do you live?";

        </script>

    <!-- Header -->
    <header id="top" class="header">
    <div class="row">
        <div class="text-vertical-center col-md-3"><h1>Map My Story <!--    <span class="h3">  Map and share your migration story--></h1> </div>
        <div class="text-vertical-center col-md-3"><h2> SOTM Edition</h2></div>
        <div id="buttons" class="text-vertical-center col-md-6">
        <button onclick='all_layer_group.snakeIn()' class="btn btn-dark btn-lg"   >Re-draw this Story</button>
        <a href ="#map"> <button onclick='map.removeLayer(all_layer_group); geocoder.expand();  ' class="btn btn-lg btn-dark" style="background-color:#337AB7"  >Submit Your Story</button></a>
        <a href="/" class="btn btn-dark btn-lg">See Another Story</a>
        <a href="/{{id}}" target="_blank" class="btn btn-dark btn-lg" >Share this Story</a>
        </div>
      </div>
    </header>

     <!-- Map -->
    <section id="map" class="map">
        <div id='map' class='dark'></div>
    <br>

    <br>
    <p id="array-warn" style="color: red;"></p>
    <script>
      var geoj = {{carto_geoj|tojson}};
    </script>
    <script>
      var geoplaces = {{ carto_places|tojson }};
    </script>
    <script>
      var prevRowId = {{ last_row_id }};
    </script>
    <script src="{{ url_for('static', filename='js/notes.js') }}"></script>
    <script src="{{ url_for('static', filename='js/geopaths.js') }}"></script>
    </section>
    <!-- instructions -->


    <section id="instructions" class="instructions bg-primary">

            <div class="row text-left">
                <div class="col-lg-10 col-lg-offset-1">
					<span class="lead">
            {{instructions}}
<!--
<ol><li>Submit up to five locations that describe several generations of your family, beginning with you and where you currently live.</li>
<li>You'll need to submit at least two points.</li>
<li>Each location should be significant to that generation: a birthplace, where they lived for a long time, or identify strongly with that place for any reason.</li>
<li>Add an optional note about you or your trace, for others to see.</li>
</ol>
<p>Once you submit your locations, we'll trace them on the map, where you can also see other people's family histories.</p></span> -->
                    <!-- /.row (nested) -->
                </div>
                <!-- /.col-lg-10 -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>
    <!-- Call to Action -->
    <aside class="call-to-action bg-primary">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <a href="#map" class="btn btn-lg btn-light">Add Your Story!</a>
                    <a href="#signup" class="btn btn-lg btn-dark">Stay In Touch!</a>
                </div>
            </div>
        </div>
    </aside>


    <!-- About -->
    <section id="about" class="about">
        <div class="container">
            <div class="row text center">
                <div class="col-lg-5 col-lg-offset-1 text-center">
					<h2>About:</h2>
					<hr class="small">
                    <p class = "lead">{{about}} </p>

                </div>
                <div class="col-lg-5 col-lg-offset-1 text-center">
                            <iframe id='signup' src="https://docs.google.com/forms/d/1JYwnBkVeSqjPiL-HYAwGIjs1RL285Aiy5mJVAoQbllM/viewform?embedded=true" width="100%" height="465" frameborder="0" marginheight="0" marginwidth="0" scrolling="no">Loading...</iframe>
                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>


    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-10 col-lg-offset-1 text-center">
                    </h4>
                    <ul class="list-unstyled">
                        <li><i class="fa fa-github fa-fw"></i> <a href="https://github.com/easherma/geotracer">https://github.com/easherma/geotracer</a></li>
                        <li><i class="fa fa-envelope-o fa-fw"></i>  <a href="geospecialtrails@gmail.com">geospecialtrails@gmail.com</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="static/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="static/js/bootstrap.min.js"></script>
    <!-- teh googles -->
    <script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-69806703-1', 'auto');
	  ga('send', 'pageview');
	</script>

    <!-- Custom Theme JavaScript -->
    <script>
    // Closes the sidebar menu
    $("#menu-close").click(function(e) {
        e.preventDefault();
        $("#sidebar-wrapper").toggleClass("active");
    });

    // Opens the sidebar menu
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#sidebar-wrapper").toggleClass("active");
    });

    // Scrolls to the selected menu item on the page
    $(function() {
        $('a[href*=#]:not([href=#])').click(function() {
            if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') || location.hostname == this.hostname) {

                var target = $(this.hash);
                target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
                if (target.length) {
                    $('html,body').animate({
                        scrollTop: target.offset().top
                    }, 1000);
                    return false;
                }
            }
        });
    });
    </script>

{% endblock %}
